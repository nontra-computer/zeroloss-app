import{_ as le,y as O,z as oe,B as J,G as X,H as ke,I as _e,J as Z,M as ee,Q as we,S as Ce,U as w,V as ce,W as Ue,X as b,Y as Ee,Z as T,$ as Ie,j as e,v as g,a0 as Oe,a1 as Qe,a2 as Pe,a3 as Fe,r as h,a4 as C,a5 as ue,K as E,t as H,a6 as Te,i as Ae,k as te,n as Me,C as Le,R as $e,a as D,b as De,P as qe,N as He}from"./index-57b6c16a.js";var Be=function(t){le(r,t);function r(i,a){var s;return s=t.call(this)||this,s.client=i,s.options=a,s.trackedProps=[],s.previousSelectError=null,s.bindMethods(),s.setOptions(a),s}var l=r.prototype;return l.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},l.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),se(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},l.onUnsubscribe=function(){this.listeners.length||this.destroy()},l.shouldFetchOnReconnect=function(){return B(this.currentQuery,this.options,this.options.refetchOnReconnect)},l.shouldFetchOnWindowFocus=function(){return B(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},l.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},l.setOptions=function(a,s){var u=this.options,o=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(a),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=u.queryKey),this.updateQuery();var n=this.hasListeners();n&&re(this.currentQuery,o,this.options,u)&&this.executeFetch(),this.updateResult(s),n&&(this.currentQuery!==o||this.options.enabled!==u.enabled||this.options.staleTime!==u.staleTime)&&this.updateStaleTimeout();var c=this.computeRefetchInterval();n&&(this.currentQuery!==o||this.options.enabled!==u.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)},l.getOptimisticResult=function(a){var s=this.client.defaultQueryObserverOptions(a),u=this.client.getQueryCache().build(this.client,s);return this.createResult(u,s)},l.getCurrentResult=function(){return this.currentResult},l.trackResult=function(a,s){var u=this,o={},n=function(d){u.trackedProps.includes(d)||u.trackedProps.push(d)};return Object.keys(a).forEach(function(c){Object.defineProperty(o,c,{configurable:!1,enumerable:!0,get:function(){return n(c),a[c]}})}),(s.useErrorBoundary||s.suspense)&&n("error"),o},l.getNextResult=function(a){var s=this;return new Promise(function(u,o){var n=s.subscribe(function(c){c.isFetching||(n(),c.isError&&(a!=null&&a.throwOnError)?o(c.error):u(c))})})},l.getCurrentQuery=function(){return this.currentQuery},l.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},l.refetch=function(a){return this.fetch(O({},a,{meta:{refetchPage:a==null?void 0:a.refetchPage}}))},l.fetchOptimistic=function(a){var s=this,u=this.client.defaultQueryObserverOptions(a),o=this.client.getQueryCache().build(this.client,u);return o.fetch().then(function(){return s.createResult(o,u)})},l.fetch=function(a){var s=this;return this.executeFetch(a).then(function(){return s.updateResult(),s.currentResult})},l.executeFetch=function(a){this.updateQuery();var s=this.currentQuery.fetch(this.options,a);return a!=null&&a.throwOnError||(s=s.catch(oe)),s},l.updateStaleTimeout=function(){var a=this;if(this.clearStaleTimeout(),!(J||this.currentResult.isStale||!X(this.options.staleTime))){var s=ke(this.currentResult.dataUpdatedAt,this.options.staleTime),u=s+1;this.staleTimeoutId=setTimeout(function(){a.currentResult.isStale||a.updateResult()},u)}},l.computeRefetchInterval=function(){var a;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(a=this.options.refetchInterval)!=null?a:!1},l.updateRefetchInterval=function(a){var s=this;this.clearRefetchInterval(),this.currentRefetchInterval=a,!(J||this.options.enabled===!1||!X(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(s.options.refetchIntervalInBackground||_e.isFocused())&&s.executeFetch()},this.currentRefetchInterval))},l.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},l.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},l.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},l.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},l.createResult=function(a,s){var u=this.currentQuery,o=this.options,n=this.currentResult,c=this.currentResultState,d=this.currentResultOptions,m=a!==u,p=m?a.state:this.currentQueryInitialState,x=m?this.currentResult:this.previousQueryResult,f=a.state,k=f.dataUpdatedAt,M=f.error,L=f.errorUpdatedAt,$=f.isFetching,v=f.status,K=!1,G=!1,y;if(s.optimisticResults){var Y=this.hasListeners(),Ne=!Y&&se(a,s),Se=Y&&re(a,u,s,o);(Ne||Se)&&($=!0,k||(v="loading"))}if(s.keepPreviousData&&!f.dataUpdateCount&&(x!=null&&x.isSuccess)&&v!=="error")y=x.data,k=x.dataUpdatedAt,v=x.status,K=!0;else if(s.select&&typeof f.data<"u"){var z;if(n&&f.data===(c==null?void 0:c.data)&&s.select===((z=this.previousSelect)==null?void 0:z.fn)&&!this.previousSelectError)y=this.previousSelect.result;else try{y=s.select(f.data),s.structuralSharing!==!1&&(y=Z(n==null?void 0:n.data,y)),this.previousSelect={fn:s.select,result:y},this.previousSelectError=null}catch(_){ee().error(_),M=_,this.previousSelectError=_,L=Date.now(),v="error"}}else y=f.data;if(typeof s.placeholderData<"u"&&typeof y>"u"&&(v==="loading"||v==="idle")){var N;if(n!=null&&n.isPlaceholderData&&s.placeholderData===(d==null?void 0:d.placeholderData))N=n.data;else if(N=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof N<"u")try{N=s.select(N),s.structuralSharing!==!1&&(N=Z(n==null?void 0:n.data,N)),this.previousSelectError=null}catch(_){ee().error(_),M=_,this.previousSelectError=_,L=Date.now(),v="error"}typeof N<"u"&&(v="success",y=N,G=!0)}var Re={status:v,isLoading:v==="loading",isSuccess:v==="success",isError:v==="error",isIdle:v==="idle",data:y,dataUpdatedAt:k,error:M,errorUpdatedAt:L,failureCount:f.fetchFailureCount,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>p.dataUpdateCount||f.errorUpdateCount>p.errorUpdateCount,isFetching:$,isRefetching:$&&v!=="loading",isLoadingError:v==="error"&&f.dataUpdatedAt===0,isPlaceholderData:G,isPreviousData:K,isRefetchError:v==="error"&&f.dataUpdatedAt!==0,isStale:W(a,s),refetch:this.refetch,remove:this.remove};return Re},l.shouldNotifyListeners=function(a,s){if(!s)return!0;var u=this.options,o=u.notifyOnChangeProps,n=u.notifyOnChangePropsExclusions;if(!o&&!n||o==="tracked"&&!this.trackedProps.length)return!0;var c=o==="tracked"?this.trackedProps:o;return Object.keys(a).some(function(d){var m=d,p=a[m]!==s[m],x=c==null?void 0:c.some(function(k){return k===d}),f=n==null?void 0:n.some(function(k){return k===d});return p&&!f&&(!c||x)})},l.updateResult=function(a){var s=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!we(this.currentResult,s)){var u={cache:!0};(a==null?void 0:a.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,s)&&(u.listeners=!0),this.notify(O({},u,a))}},l.updateQuery=function(){var a=this.client.getQueryCache().build(this.client,this.options);if(a!==this.currentQuery){var s=this.currentQuery;this.currentQuery=a,this.currentQueryInitialState=a.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),a.addObserver(this))}},l.onQueryUpdate=function(a){var s={};a.type==="success"?s.onSuccess=!0:a.type==="error"&&!Ce(a.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()},l.notify=function(a){var s=this;w.batch(function(){a.onSuccess?(s.options.onSuccess==null||s.options.onSuccess(s.currentResult.data),s.options.onSettled==null||s.options.onSettled(s.currentResult.data,null)):a.onError&&(s.options.onError==null||s.options.onError(s.currentResult.error),s.options.onSettled==null||s.options.onSettled(void 0,s.currentResult.error)),a.listeners&&s.listeners.forEach(function(u){u(s.currentResult)}),a.cache&&s.client.getQueryCache().notify({query:s.currentQuery,type:"observerResultsUpdated"})})},r}(ce);function Ve(t,r){return r.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&r.retryOnMount===!1)}function se(t,r){return Ve(t,r)||t.state.dataUpdatedAt>0&&B(t,r,r.refetchOnMount)}function B(t,r,l){if(r.enabled!==!1){var i=typeof l=="function"?l(t):l;return i==="always"||i!==!1&&W(t,r)}return!1}function re(t,r,l,i){return l.enabled!==!1&&(t!==r||i.enabled===!1)&&(!l.suspense||t.state.status!=="error")&&W(t,l)}function W(t,r){return t.isStaleByTime(r.staleTime)}var We=function(t){le(r,t);function r(i,a){var s;return s=t.call(this)||this,s.client=i,s.setOptions(a),s.bindMethods(),s.updateResult(),s}var l=r.prototype;return l.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},l.setOptions=function(a){this.options=this.client.defaultMutationOptions(a)},l.onUnsubscribe=function(){if(!this.listeners.length){var a;(a=this.currentMutation)==null||a.removeObserver(this)}},l.onMutationUpdate=function(a){this.updateResult();var s={listeners:!0};a.type==="success"?s.onSuccess=!0:a.type==="error"&&(s.onError=!0),this.notify(s)},l.getCurrentResult=function(){return this.currentResult},l.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},l.mutate=function(a,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,O({},this.options,{variables:typeof a<"u"?a:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},l.updateResult=function(){var a=this.currentMutation?this.currentMutation.state:Ue(),s=O({},a,{isLoading:a.status==="loading",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=s},l.notify=function(a){var s=this;w.batch(function(){s.mutateOptions&&(a.onSuccess?(s.mutateOptions.onSuccess==null||s.mutateOptions.onSuccess(s.currentResult.data,s.currentResult.variables,s.currentResult.context),s.mutateOptions.onSettled==null||s.mutateOptions.onSettled(s.currentResult.data,null,s.currentResult.variables,s.currentResult.context)):a.onError&&(s.mutateOptions.onError==null||s.mutateOptions.onError(s.currentResult.error,s.currentResult.variables,s.currentResult.context),s.mutateOptions.onSettled==null||s.mutateOptions.onSettled(void 0,s.currentResult.error,s.currentResult.variables,s.currentResult.context))),a.listeners&&s.listeners.forEach(function(u){u(s.currentResult)})})},r}(ce);function Ke(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var Ge=b.createContext(Ke()),Ye=function(){return b.useContext(Ge)};function de(t,r,l){return typeof r=="function"?r.apply(void 0,l):typeof r=="boolean"?r:!!t}function he(t,r,l){var i=b.useRef(!1),a=b.useState(0),s=a[1],u=Ee(t,r,l),o=T(),n=b.useRef();n.current?n.current.setOptions(u):n.current=new We(o,u);var c=n.current.getCurrentResult();b.useEffect(function(){i.current=!0;var m=n.current.subscribe(w.batchCalls(function(){i.current&&s(function(p){return p+1})}));return function(){i.current=!1,m()}},[]);var d=b.useCallback(function(m,p){n.current.mutate(m,p).catch(oe)},[]);if(c.error&&de(void 0,n.current.options.useErrorBoundary,[c.error]))throw c.error;return O({},c,{mutate:d,mutateAsync:c.mutate})}function ze(t,r){var l=b.useRef(!1),i=b.useState(0),a=i[1],s=T(),u=Ye(),o=s.defaultQueryObserverOptions(t);o.optimisticResults=!0,o.onError&&(o.onError=w.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=w.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=w.batchCalls(o.onSettled)),o.suspense&&(typeof o.staleTime!="number"&&(o.staleTime=1e3),o.cacheTime===0&&(o.cacheTime=1)),(o.suspense||o.useErrorBoundary)&&(u.isReset()||(o.retryOnMount=!1));var n=b.useState(function(){return new r(s,o)}),c=n[0],d=c.getOptimisticResult(o);if(b.useEffect(function(){l.current=!0,u.clearReset();var m=c.subscribe(w.batchCalls(function(){l.current&&a(function(p){return p+1})}));return c.updateResult(),function(){l.current=!1,m()}},[u,c]),b.useEffect(function(){c.setOptions(o,{listeners:!1})},[o,c]),o.suspense&&d.isLoading)throw c.fetchOptimistic(o).then(function(m){var p=m.data;o.onSuccess==null||o.onSuccess(p),o.onSettled==null||o.onSettled(p,null)}).catch(function(m){u.clearReset(),o.onError==null||o.onError(m),o.onSettled==null||o.onSettled(void 0,m)});if(d.isError&&!u.isReset()&&!d.isFetching&&de(o.suspense,o.useErrorBoundary,[d.error,c.getCurrentQuery()]))throw d.error;return o.notifyOnChangeProps==="tracked"&&(d=c.trackResult(d,o)),d}function me(t,r,l){var i=Ie(t,r,l);return ze(i,Be)}const Je=t=>{const{className:r,shadow:l,flush:i,resetSidePaddings:a,border:s,dashed:u,stretch:o,rounded:n,utilityP:c,utilityPY:d,utilityPX:m,children:p}=t;return e.jsx("div",{className:g("card",r&&r,{"shadow-sm":l,"card-flush":i,"card-px-0":a,"card-bordered":s,"card-dashed":u},o&&`card-${o}`,c&&`p-${c}`,m&&`px-${m}`,d&&`py-${d}`,n&&`card-${n}`),children:p})},Xe=t=>{const{className:r,scroll:l,height:i,children:a}=t;return e.jsx("div",{className:g("card-body",r&&r,{"card-scroll":l},i&&`h-${i}px`),children:a})};var Ze=Qe,et=Pe,tt=Fe,st={formats:tt,parse:et,stringify:Ze};const q=Oe(st);function rt(t){return h.createContext(t)}function F(t){return t!=null&&t!==""}function ae(t){const r=q.stringify(t,{filter:["page","items_per_page"],skipNulls:!0}),l=q.stringify(t,{filter:["sort","order"],skipNulls:!0}),i=F(t.search)?q.stringify(t,{filter:["search"],skipNulls:!0}):"",a=t.filter?Object.entries(t.filter).filter(s=>F(s[1])).map(s=>`filter_${s[0]}=${s[1]}`).join("&"):"";return[r,l,i,a].filter(s=>s).join("&").toLowerCase()}function at(t,r){return t?!0:!r||!r.length}function nt(t,r){return t?t.length>0&&t.length===r.length:!1}function it(t,r,l){if(t)if(r.includes(t))l(r.filter(i=>i!==t));else{const i=[...r];i.push(t),l(i)}}function lt(t,r,l){if(t){r([]);return}!l||!l.length||r(l.filter(i=>i.id).map(i=>i.id))}function ot(t,r){const[l,i]=h.useState(t);return h.useEffect(()=>{const a=setTimeout(()=>{i(t)},r);return()=>{clearTimeout(a)}},[t,r]),l}const S={page:1,items_per_page:10},fe={state:S,updateState:()=>{}},ct={refetch:()=>{},isLoading:!1,query:""},V={selected:[],onSelect:()=>{},onSelectAll:()=>{},clearSelected:()=>{},setItemIdForUpdate:()=>{},isAllSelected:!1,disabled:!1},A={USERS_LIST:"users-list"},pe="https://preview.keenthemes.com/theme-api/api",Q=`${pe}/user`,ut=`${pe}/users/query`,dt=t=>C.get(`${ut}?${t}`).then(r=>r.data),ht=t=>C.get(`${Q}/${t}`).then(r=>r.data).then(r=>r.data),mt=t=>C.put(Q,t).then(r=>r.data).then(r=>r.data),ft=t=>C.post(`${Q}/${t.id}`,t).then(r=>r.data).then(r=>r.data),pt=t=>C.delete(`${Q}/${t}`).then(()=>{}),vt=t=>{const r=t.map(l=>C.delete(`${Q}/${l}`));return C.all(r).then(()=>{})},ve=h.createContext(fe),xt=({children:t})=>{const[r,l]=h.useState(fe.state),i=a=>{const s={...r,...a};l(s)};return e.jsx(ve.Provider,{value:{state:r,updateState:i},children:t})},P=()=>h.useContext(ve),xe=rt(ct),bt=({children:t})=>{const{state:r}=P(),[l,i]=h.useState(ae(r)),a=h.useMemo(()=>ae(r),[r]);h.useEffect(()=>{l!==a&&i(a)},[a]);const{isFetching:s,refetch:u,data:o}=me(`${A.USERS_LIST}-${l}`,()=>dt(l),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1});return e.jsx(xe.Provider,{value:{isLoading:s,refetch:u,response:o,query:l},children:t})},R=()=>h.useContext(xe),be=()=>{const{response:t}=R();return t?(t==null?void 0:t.data)||[]:[]},gt=()=>{const t={links:[],...S},{response:r}=R();return!r||!r.payload||!r.payload.pagination?t:r.payload.pagination},ge=()=>{const{isLoading:t}=R();return t},ye=h.createContext(V),yt=({children:t})=>{const[r,l]=h.useState(V.selected),[i,a]=h.useState(V.itemIdForUpdate),{isLoading:s}=R(),u=be(),o=h.useMemo(()=>at(s,u),[s,u]),n=h.useMemo(()=>nt(u,r),[u,r]);return e.jsx(ye.Provider,{value:{selected:r,itemIdForUpdate:i,setItemIdForUpdate:a,disabled:o,isAllSelected:n,onSelect:c=>{it(c,r,l)},onSelectAll:()=>{lt(n,l,u)},clearSelected:()=>{l([])}},children:t})},j=()=>h.useContext(ye),jt=()=>{const{updateState:t}=P(),{isLoading:r}=R(),[l,i]=h.useState(),[a,s]=h.useState();h.useEffect(()=>{ue.reinitialization()},[]);const u=()=>{t({filter:void 0,...S})},o=()=>{t({filter:{role:l,last_login:a},...S})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{disabled:r,type:"button",className:"btn btn-light-primary me-3","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:[e.jsx(E,{iconName:"filter",className:"fs-2"}),"Filter"]}),e.jsxs("div",{className:"menu menu-sub menu-sub-dropdown w-300px w-md-325px","data-kt-menu":"true",children:[e.jsx("div",{className:"px-7 py-5",children:e.jsx("div",{className:"fs-5 text-gray-900 fw-bolder",children:"Filter Options"})}),e.jsx("div",{className:"separator border-gray-200"}),e.jsxs("div",{className:"px-7 py-5","data-kt-user-table-filter":"form",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("label",{className:"form-label fs-6 fw-bold",children:"Role:"}),e.jsxs("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"role","data-hide-search":"true",onChange:n=>i(n.target.value),value:l,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Administrator",children:"Administrator"}),e.jsx("option",{value:"Analyst",children:"Analyst"}),e.jsx("option",{value:"Developer",children:"Developer"}),e.jsx("option",{value:"Support",children:"Support"}),e.jsx("option",{value:"Trial",children:"Trial"})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("label",{className:"form-label fs-6 fw-bold",children:"Last login:"}),e.jsxs("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"two-step","data-hide-search":"true",onChange:n=>s(n.target.value),value:a,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Yesterday",children:"Yesterday"}),e.jsx("option",{value:"20 mins ago",children:"20 mins ago"}),e.jsx("option",{value:"5 hours ago",children:"5 hours ago"}),e.jsx("option",{value:"2 days ago",children:"2 days ago"})]})]}),e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx("button",{type:"button",disabled:r,onClick:o,className:"btn btn-light btn-active-light-primary fw-bold me-2 px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"reset",children:"Reset"}),e.jsx("button",{disabled:r,type:"button",onClick:u,className:"btn btn-primary fw-bold px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"filter",children:"Apply"})]})]})]})]})},Nt=()=>{const{setItemIdForUpdate:t}=j(),r=()=>{t(null)};return e.jsxs("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:[e.jsx(jt,{}),e.jsxs("button",{type:"button",className:"btn btn-light-primary me-3",children:[e.jsx(E,{iconName:"exit-up",className:"fs-2"}),"Export"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:r,children:[e.jsx(E,{iconName:"plus",className:"fs-2"}),"Add User"]})]})},St=()=>{const{selected:t,clearSelected:r}=j(),l=T(),{query:i}=R(),a=he(()=>vt(t),{onSuccess:()=>{l.invalidateQueries([`${A.USERS_LIST}-${i}`]),r()}});return e.jsxs("div",{className:"d-flex justify-content-end align-items-center",children:[e.jsxs("div",{className:"fw-bolder me-5",children:[e.jsx("span",{className:"me-2",children:t.length})," Selected"]}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:async()=>await a.mutateAsync(),children:"Delete Selected"})]})},Rt=()=>{const{updateState:t}=P(),[r,l]=h.useState(""),i=ot(r,150);return h.useEffect(()=>{i!==void 0&&r!==void 0&&t({search:i,...S})},[i]),e.jsx("div",{className:"card-title",children:e.jsxs("div",{className:"d-flex align-items-center position-relative my-1",children:[e.jsx(E,{iconName:"magnifier",className:"fs-1 position-absolute ms-6"}),e.jsx("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search user",value:r,onChange:a=>l(a.target.value)})]})})},kt=()=>{const{selected:t}=j();return e.jsxs("div",{className:"card-header border-0 pt-6",children:[e.jsx(Rt,{}),e.jsx("div",{className:"card-toolbar",children:t.length>0?e.jsx(St,{}):e.jsx(Nt,{})})]})},_t=({column:t})=>e.jsx(e.Fragment,{children:t.Header&&typeof t.Header=="string"?e.jsx("th",{...t.getHeaderProps(),children:t.render("Header")}):t.render("Header")}),wt=({row:t})=>e.jsx("tr",{...t.getRowProps(),children:t.cells.map(r=>e.jsx("td",{...r.getCellProps(),className:g({"text-end min-w-100px":r.column.id==="actions"}),children:r.render("Cell")}))}),Ct=({user:t})=>{var r,l,i;return e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3",children:e.jsx("a",{href:"#",children:t.avatar?e.jsx("div",{className:"symbol-label",children:e.jsx("img",{src:H(`media/${t.avatar}`),alt:t.name,className:"w-100"})}):e.jsx("div",{className:g("symbol-label fs-3",`bg-light-${(r=t.initials)==null?void 0:r.state}`,`text-${(l=t.initials)==null?void 0:l.state}`),children:(i=t.initials)==null?void 0:i.label})})}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("a",{href:"#",className:"text-gray-800 text-hover-primary mb-1",children:t.name}),e.jsx("span",{children:t.email})]})]})},Ut=({last_login:t})=>e.jsx("div",{className:"badge badge-light fw-bolder",children:t}),Et=({two_steps:t})=>e.jsxs(e.Fragment,{children:[" ",t&&e.jsx("div",{className:"badge badge-light-success fw-bolder",children:"Enabled"})]}),It=({id:t})=>{const{setItemIdForUpdate:r}=j(),{query:l}=R(),i=T();h.useEffect(()=>{ue.reinitialization()},[]);const a=()=>{r(t)},s=he(()=>pt(t),{onSuccess:()=>{i.invalidateQueries([`${A.USERS_LIST}-${l}`])}});return e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"#",className:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:["Actions",e.jsx(E,{iconName:"down",className:"fs-5 m-0"})]}),e.jsxs("div",{className:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4","data-kt-menu":"true",children:[e.jsx("div",{className:"menu-item px-3",children:e.jsx("a",{className:"menu-link px-3",onClick:a,children:"Edit"})}),e.jsx("div",{className:"menu-item px-3",children:e.jsx("a",{className:"menu-link px-3","data-kt-users-table-filter":"delete_row",onClick:async()=>await s.mutateAsync(),children:"Delete"})})]})]})},Ot=({id:t})=>{const{selected:r,onSelect:l}=j(),i=h.useMemo(()=>r.includes(t),[t,r]);return e.jsx("div",{className:"form-check form-check-custom form-check-solid",children:e.jsx("input",{className:"form-check-input",type:"checkbox","data-kt-check":i,"data-kt-check-target":"#kt_table_users .form-check-input",checked:i,onChange:()=>l(t)})})},U=({className:t,title:r,tableProps:l})=>{const i=l.column.id,{state:a,updateState:s}=P(),u=h.useMemo(()=>a.sort&&a.sort===i,[a,i]),o=h.useMemo(()=>a.order,[a]),n=()=>{if(!(i==="actions"||i==="selection")){if(!u){s({sort:i,order:"asc",...S});return}if(u&&o!==void 0){if(o==="asc"){s({sort:i,order:"desc",...S});return}s({sort:void 0,order:void 0,...S})}}};return e.jsx("th",{...l.column.getHeaderProps(),className:g(t,u&&o!==void 0&&`table-sort-${o}`),style:{cursor:"pointer"},onClick:n,children:r})},Qt=({tableProps:t})=>{const{isAllSelected:r,onSelectAll:l}=j();return e.jsx("th",{...t.column.getHeaderProps(),className:"w-10px pe-2",children:e.jsx("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:e.jsx("input",{className:"form-check-input",type:"checkbox","data-kt-check":r,"data-kt-check-target":"#kt_table_users .form-check-input",checked:r,onChange:l})})})},Pt=[{Header:t=>e.jsx(Qt,{tableProps:t}),id:"selection",Cell:({...t})=>e.jsx(Ot,{id:t.data[t.row.index].id})},{Header:t=>e.jsx(U,{tableProps:t,title:"Name",className:"min-w-125px"}),id:"name",Cell:({...t})=>e.jsx(Ct,{user:t.data[t.row.index]})},{Header:t=>e.jsx(U,{tableProps:t,title:"Role",className:"min-w-125px"}),accessor:"role"},{Header:t=>e.jsx(U,{tableProps:t,title:"Last login",className:"min-w-125px"}),id:"last_login",Cell:({...t})=>e.jsx(Ut,{last_login:t.data[t.row.index].last_login})},{Header:t=>e.jsx(U,{tableProps:t,title:"Two steps",className:"min-w-125px"}),id:"two_steps",Cell:({...t})=>e.jsx(Et,{two_steps:t.data[t.row.index].two_steps})},{Header:t=>e.jsx(U,{tableProps:t,title:"Joined day",className:"min-w-125px"}),accessor:"joined_day"},{Header:t=>e.jsx(U,{tableProps:t,title:"Actions",className:"text-end min-w-100px"}),id:"actions",Cell:({...t})=>e.jsx(It,{id:t.data[t.row.index].id})}],je=()=>{const t={borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"};return e.jsx("div",{style:{...t,position:"absolute",textAlign:"center"},children:"Processing..."})},ne=t=>t==="&laquo; Previous"?"Previous":t==="Next &raquo;"?"Next":t,Ft=()=>{var o;const t=gt(),r=ge(),{updateState:l}=P(),i=n=>{!n||r||t.page===n||l({page:n,items_per_page:t.items_per_page||10})},a=5,s=n=>{var f;if(!((f=n==null?void 0:n.links)!=null&&f.length))return[];const c=[...n.links];let d=[];const m=c.shift(),p=c.pop(),x=Math.floor(a/2);return d.push(m),(n.page<=Math.round(a/2)||c.length<=a)&&(d=[...d,...c.slice(0,a)]),n.page>c.length-x&&c.length>a&&(d=[...d,...c.slice(c.length-a,c.length)]),!(n.page<=Math.round(a/2)||c.length<=a)&&!(n.page>c.length-x)&&(d=[...d,...c.slice(n.page-1-x,n.page+x)]),d.push(p),d},u=h.useMemo(()=>s(t),[t]);return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),e.jsx("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:e.jsx("div",{id:"kt_table_users_paginate",children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:g("page-item",{disabled:r||t.page===1}),children:e.jsx("a",{onClick:()=>i(1),style:{cursor:"pointer"},className:"page-link",children:"First"})}),u==null?void 0:u.map(n=>({...n,label:ne(n.label)})).map(n=>e.jsx("li",{className:g("page-item",{active:t.page===n.page,disabled:r,previous:n.label==="Previous",next:n.label==="Next"}),children:e.jsx("a",{className:g("page-link",{"page-text":n.label==="Previous"||n.label==="Next","me-5":n.label==="Previous"}),onClick:()=>i(n.page),style:{cursor:"pointer"},children:ne(n.label)})},n.label)),e.jsx("li",{className:g("page-item",{disabled:r||t.page===(((o=t.links)==null?void 0:o.length)||3)-2}),children:e.jsx("a",{onClick:()=>{var n;return i((((n=t.links)==null?void 0:n.length)||3)-2)},style:{cursor:"pointer"},className:"page-link",children:"Last"})})]})})})]})},Tt=()=>{const t=be(),r=ge(),l=h.useMemo(()=>t,[t]),i=h.useMemo(()=>Pt,[]),{getTableProps:a,getTableBodyProps:s,headers:u,rows:o,prepareRow:n}=Te.useTable({columns:i,data:l});return e.jsxs(Xe,{className:"py-4",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer",...a(),children:[e.jsx("thead",{children:e.jsx("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:u.map(c=>e.jsx(_t,{column:c},c.id))})}),e.jsx("tbody",{className:"text-gray-600 fw-bold",...s(),children:o.length>0?o.map((c,d)=>(n(c),e.jsx(wt,{row:c},`row-${d}-${c.id}`))):e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})})]})}),e.jsx(Ft,{}),r&&e.jsx(je,{})]})},At=()=>{const{setItemIdForUpdate:t}=j();return e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"fw-bolder",children:"Add User"}),e.jsx("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:()=>t(void 0),style:{cursor:"pointer"},children:e.jsx(E,{iconName:"cross",className:"fs-1"})})]})},I={avatar:"avatars/300-6.jpg",position:"Art Director",role:"Administrator",name:"",email:""},Mt=Ae().shape({email:te().email("Wrong email format").min(3,"Minimum 3 symbols").max(50,"Maximum 50 symbols").required("Email is required"),name:te().min(3,"Minimum 3 symbols").max(50,"Maximum 50 symbols").required("Name is required")}),ie=({user:t,isUserLoading:r})=>{const{setItemIdForUpdate:l}=j(),{refetch:i}=R(),[a]=h.useState({...t,avatar:t.avatar||I.avatar,role:t.role||I.role,position:t.position||I.position,name:t.name||I.name,email:t.email||I.email}),s=c=>{c&&i(),l(void 0)},u=H("media/svg/avatars/blank.svg"),o=H(`media/${a.avatar}`),n=Me({initialValues:a,validationSchema:Mt,onSubmit:async(c,{setSubmitting:d})=>{d(!0);try{F(c.id)?await ft(c):await mt(c)}catch(m){console.error(m)}finally{d(!0),s(!0)}}});return e.jsxs(e.Fragment,{children:[e.jsxs("form",{id:"kt_modal_add_user_form",className:"form",onSubmit:n.handleSubmit,noValidate:!0,children:[e.jsxs("div",{className:"d-flex flex-column scroll-y me-n7 pe-7",id:"kt_modal_add_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_user_header","data-kt-scroll-wrappers":"#kt_modal_add_user_scroll","data-kt-scroll-offset":"300px",children:[e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"d-block fw-bold fs-6 mb-5",children:"Avatar"}),e.jsx("div",{className:"image-input image-input-outline","data-kt-image-input":"true",style:{backgroundImage:`url('${u}')`},children:e.jsx("div",{className:"image-input-wrapper w-125px h-125px",style:{backgroundImage:`url('${o}')`}})})]}),e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"required fw-bold fs-6 mb-2",children:"Full Name"}),e.jsx("input",{placeholder:"Full name",...n.getFieldProps("name"),type:"text",name:"name",className:g("form-control form-control-solid mb-3 mb-lg-0",{"is-invalid":n.touched.name&&n.errors.name},{"is-valid":n.touched.name&&!n.errors.name}),autoComplete:"off",disabled:n.isSubmitting||r}),n.touched.name&&n.errors.name&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:e.jsx("span",{role:"alert",children:n.errors.name})})})]}),e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"required fw-bold fs-6 mb-2",children:"Email"}),e.jsx("input",{placeholder:"Email",...n.getFieldProps("email"),className:g("form-control form-control-solid mb-3 mb-lg-0",{"is-invalid":n.touched.email&&n.errors.email},{"is-valid":n.touched.email&&!n.errors.email}),type:"email",name:"email",autoComplete:"off",disabled:n.isSubmitting||r}),n.touched.email&&n.errors.email&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("span",{role:"alert",children:n.errors.email})})]}),e.jsxs("div",{className:"mb-7",children:[e.jsx("label",{className:"required fw-bold fs-6 mb-5",children:"Role"}),e.jsx("div",{className:"d-flex fv-row",children:e.jsxs("div",{className:"form-check form-check-custom form-check-solid",children:[e.jsx("input",{className:"form-check-input me-3",...n.getFieldProps("role"),name:"role",type:"radio",value:"Administrator",id:"kt_modal_update_role_option_0",checked:n.values.role==="Administrator",disabled:n.isSubmitting||r}),e.jsxs("label",{className:"form-check-label",htmlFor:"kt_modal_update_role_option_0",children:[e.jsx("div",{className:"fw-bolder text-gray-800",children:"Administrator"}),e.jsx("div",{className:"text-gray-600",children:"Best for business owners and company administrators"})]})]})}),e.jsx("div",{className:"separator separator-dashed my-5"}),e.jsx("div",{className:"d-flex fv-row",children:e.jsxs("div",{className:"form-check form-check-custom form-check-solid",children:[e.jsx("input",{className:"form-check-input me-3",...n.getFieldProps("role"),name:"role",type:"radio",value:"Developer",id:"kt_modal_update_role_option_1",checked:n.values.role==="Developer",disabled:n.isSubmitting||r}),e.jsxs("label",{className:"form-check-label",htmlFor:"kt_modal_update_role_option_1",children:[e.jsx("div",{className:"fw-bolder text-gray-800",children:"Developer"}),e.jsx("div",{className:"text-gray-600",children:"Best for developers or people primarily using the API"})]})]})}),e.jsx("div",{className:"separator separator-dashed my-5"}),e.jsx("div",{className:"d-flex fv-row",children:e.jsxs("div",{className:"form-check form-check-custom form-check-solid",children:[e.jsx("input",{className:"form-check-input me-3",...n.getFieldProps("role"),name:"role",type:"radio",value:"Analyst",id:"kt_modal_update_role_option_2",checked:n.values.role==="Analyst",disabled:n.isSubmitting||r}),e.jsxs("label",{className:"form-check-label",htmlFor:"kt_modal_update_role_option_2",children:[e.jsx("div",{className:"fw-bolder text-gray-800",children:"Analyst"}),e.jsx("div",{className:"text-gray-600",children:"Best for people who need full access to analytics data, but don't need to update business settings"})]})]})}),e.jsx("div",{className:"separator separator-dashed my-5"}),e.jsx("div",{className:"d-flex fv-row",children:e.jsxs("div",{className:"form-check form-check-custom form-check-solid",children:[e.jsx("input",{className:"form-check-input me-3",...n.getFieldProps("role"),name:"role",type:"radio",value:"Support",id:"kt_modal_update_role_option_3",checked:n.values.role==="Support",disabled:n.isSubmitting||r}),e.jsxs("label",{className:"form-check-label",htmlFor:"kt_modal_update_role_option_3",children:[e.jsx("div",{className:"fw-bolder text-gray-800",children:"Support"}),e.jsx("div",{className:"text-gray-600",children:"Best for employees who regularly refund payments and respond to disputes"})]})]})}),e.jsx("div",{className:"separator separator-dashed my-5"}),e.jsx("div",{className:"d-flex fv-row",children:e.jsxs("div",{className:"form-check form-check-custom form-check-solid",children:[e.jsx("input",{className:"form-check-input me-3",...n.getFieldProps("role"),name:"role",type:"radio",id:"kt_modal_update_role_option_4",value:"Trial",checked:n.values.role==="Trial",disabled:n.isSubmitting||r}),e.jsxs("label",{className:"form-check-label",htmlFor:"kt_modal_update_role_option_4",children:[e.jsx("div",{className:"fw-bolder text-gray-800",children:"Trial"}),e.jsx("div",{className:"text-gray-600",children:"Best for people who need to preview content data, but don't need to make any updates"})]})]})})]})]}),e.jsxs("div",{className:"text-center pt-15",children:[e.jsx("button",{type:"reset",onClick:()=>s(),className:"btn btn-light me-3","data-kt-users-modal-action":"cancel",disabled:n.isSubmitting||r,children:"Discard"}),e.jsxs("button",{type:"submit",className:"btn btn-primary","data-kt-users-modal-action":"submit",disabled:r||n.isSubmitting||!n.isValid||!n.touched,children:[e.jsx("span",{className:"indicator-label",children:"Submit"}),(n.isSubmitting||r)&&e.jsxs("span",{className:"indicator-progress",children:["Please wait..."," ",e.jsx("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]}),(n.isSubmitting||r)&&e.jsx(je,{})]})},Lt=()=>{const{itemIdForUpdate:t,setItemIdForUpdate:r}=j(),l=F(t),{isLoading:i,data:a,error:s}=me(`${A.USERS_LIST}-user-${t}`,()=>ht(t),{cacheTime:0,enabled:l,onError:u=>{r(void 0),console.error(u)}});return t?!i&&!s&&a?e.jsx(ie,{isUserLoading:i,user:a}):null:e.jsx(ie,{isUserLoading:i,user:{id:void 0}})},$t=()=>(h.useEffect(()=>(document.body.classList.add("modal-open"),()=>{document.body.classList.remove("modal-open")}),[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:e.jsxs("div",{className:"modal-content",children:[e.jsx(At,{}),e.jsx("div",{className:"modal-body scroll-y mx-5 mx-xl-15 my-7",children:e.jsx(Lt,{})})]})})}),e.jsx("div",{className:"modal-backdrop fade show"})]})),Dt=()=>{const{itemIdForUpdate:t}=j();return e.jsxs(e.Fragment,{children:[e.jsxs(Je,{children:[e.jsx(kt,{}),e.jsx(Tt,{})]}),t!==void 0&&e.jsx($t,{})]})},qt=()=>e.jsx(xt,{children:e.jsx(bt,{children:e.jsx(yt,{children:e.jsx(Le,{children:e.jsx(Dt,{})})})})}),Ht=[{title:"User Management",path:"/apps/user-management/users",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],Vt=()=>e.jsxs($e,{children:[e.jsx(D,{element:e.jsx(De,{}),children:e.jsx(D,{path:"users",element:e.jsxs(e.Fragment,{children:[e.jsx(qe,{breadcrumbs:Ht,children:"Users list"}),e.jsx(qt,{})]})})}),e.jsx(D,{index:!0,element:e.jsx(He,{to:"/apps/user-management/users"})})]});export{Vt as default};
